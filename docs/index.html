<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Shorpy is a powerful and easy-to-use .NET library that provides seamless dynamic Pagination, Searching, and Sorting for applications using Entity Framework Core, ASP.NET Core WebAPI, and written in C#. It aims to simplify data handling and improve performance by offering efficient querying mechanisms."
    />

    <meta name="keywords" content="HTML, CSS, JavaScript" />
    <title>Shorpy - For Dynamic Pagination, Searching and Sorting</title>
    <!-- bootstrap css -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- google search console verification -->
    <meta
      name="google-site-verification"
      content="E424pWYa9wfdT6EHSNrX1qE_a88pegA31GXcoI793lw"
    />
    <!-- syntax highlight -->
    <style>
      pre {
        background-color: #ededed;
        padding: 15px;
        border-radius: 5px;
        overflow-x: auto;
        box-shadow: #cdc9c9 -2px 4px
      }
      .keyword {
        color: #569cd6;
      } /* Keywords like public, class, void */
      .class-name {
        color: #164cdf;
      } /* Class names */
      .method {
        color: #831786;
      } /* Method names */
      .string {
        color: #ce9178;
      } /* Strings */
      .comment {
        color: #6a9955;
        font-style: italic;
      } /* Comments */
      .namespace {
        color: #388008;
      } /* Namespace */
      .number {
        color: #8d3810;
      } /* Numbers */
    </style>
  </head>
  <body>
    <div class="text-white" style="background-color: #2384ac">
      <div class="container">
        <!-- intro-->
        <div class="p-5">
          <h1 class="display-2">
            Welcome to <span class="fst-italic fw-bold">Shorpy</span>
          </h1>
          <p class="lead">
            Shorpy is a powerful and easy-to-use .NET library that provides
            seamless <b>dynamic Pagination</b>, <b>Searching</b>, and
            <b>Sorting</b> for applications using <b>Entity Framework Core</b>,
            <b>ASP.NET Core WebAPI</b>, and written in C#. It aims to simplify
            data handling and improve performance by offering efficient querying
            mechanisms.
          </p>
          <div>
            <a
              class="icon-link me-3 text-white link-underline-light"
              href="https://github.com/Udara-de-Silva/Shorpy"
              target="_blank"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-github"
                viewBox="0 0 16 16"
              >
                <path
                  d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"
                />
              </svg>
              GitHub Repository
            </a>
            <a
              class="icon-link text-white link-underline-light"
              href="https://www.nuget.org/packages/Shorpy"
              target="_blank"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                fill="currentColor"
                class="bi bi-box2-heart-fill"
                viewBox="0 0 16 16"
              >
                <path
                  d="M3.75 0a1 1 0 0 0-.8.4L.1 4.2a.5.5 0 0 0-.1.3V15a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V4.5a.5.5 0 0 0-.1-.3L13.05.4a1 1 0 0 0-.8-.4zM8.5 4h6l.5.667V5H1v-.333L1.5 4h6V1h1zM8 7.993c1.664-1.711 5.825 1.283 0 5.132-5.825-3.85-1.664-6.843 0-5.132"
                />
              </svg>
              Nuget Package
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="p-5">
        <!-- justification -->
        <div class="row">
          <div class="col-12 col-lg">
            <p class="mt-3 lead">
              Implementing pagination, dynamic search, and sorting in C# with
              Entity Framework Core is often a tedious and repetitive task. Each
              time you need these features in a new project, you have to write
              almost the same boilerplate code, adjusting it slightly to fit
              different models and requirements. While EF Core provides some
              basic support through methods like <code>.Skip()</code> and
              <code>.Take()</code> for pagination or <code>.OrderBy()</code> for
              sorting, developers still have to manually combine these
              operations, handle edge cases, and ensure efficiency. This process
              becomes even more cumbersome when dealing with dynamic queries
              where filters and sort orders can change at runtime.
            </p>
            <p class="mt-3 lead">
              One of the major pain points is writing the logic to construct
              dynamic LINQ queries based on user input. Implementing a flexible
              and efficient search mechanism requires building
              <code>IQueryable</code> expressions dynamically, often using
              <code>Expression Trees</code> or <code>PredicateBuilder</code>,
              which can be complex and error-prone. Similarly, supporting
              multiple sorting fields dynamically means handling string-based
              property names, validating inputs, and applying order operations
              correctly. Every time you implement these features, you find
              yourself rewriting or copy-pasting the same logic across different
              projects, which is both time-consuming and inefficient.
            </p>
          </div>
          <div
            class="col-12 col-lg-5 text-center d-flex flex-column justify-content-center"
          >
            <img
              class="w-100 object-fit-contain"
              src="./happy.jpg"
              alt="Happy Person"
            />
            <a
              class="text-secondary small"
              href="https://www.freepik.com/free-photo/portrait-excited-bearded-man-holding-laptop-computer_6819550.htm#fromView=search&page=1&position=6&uuid=9ed0f9b5-18af-4907-a77c-2a5d12fcfedb&query=happy+coder"
              >Image by drobotdean on Freepik</a
            >
          </div>
        </div>
        <div class="row">
          <p class="mt-3 lead">
            To further complicate matters, pagination requires careful handling
            to optimize database queries, ensuring that large datasets don’t
            degrade performance. While libraries like AutoMapper and custom DTOs
            can simplify some of these tasks, setting them up still takes
            additional effort. Given how often these features are needed in
            applications, a reusable abstraction or library would significantly
            reduce redundancy.
          </p>
          <p class="mt-3 lead">
            This is where <b>Shorpy</b> can save a lot of time and effort.
            Instead of manually implementing pagination, dynamic search, and
            sorting in every project, Shorpy provides a ready-made, efficient
            solution that simplifies these repetitive tasks.
          </p>
          <p class="mt-3 lead">
            With Shorpy, you don’t have to worry about constructing complex
            <code>IQueryable</code> expressions, handling dynamic filtering, or
            ensuring optimal database queries. It abstracts away the boilerplate
            code, allowing developers to focus on business logic rather than
            spending hours writing and debugging common features. This not only
            speeds up development but also improves maintainability by enforcing
            consistency across projects.
          </p>
        </div>
      </div>
      <!-- installation -->
      <div class="p-5 pt-0 fs-5">
        <h2 class="display-4">Installation</h2>
        <p>Install via NuGet Package Manager:</p>
        <div class="bg-secondary-subtle p-3">
          <code> Install-Package Shorpy </code>
        </div>
        <p class="mt-3">Or via .NET CLI:</p>
        <div class="bg-secondary-subtle p-3">
          <code> dotnet add package Shorpy </code>
        </div>
      </div>

      <!-- getting started -->
      <div class="p-5 pt-0 fs-5">
        <h2 class="display-4">Getting Started</h2>
        <p>
          All you need to get-started are two configuration files; per each
          Entity you wish to bind with Shorpy's wonderful functionality.
        </p>
        <ol>
          <li><code>SnSAble</code> configuration file</li>
          <ul>
            <li>
              An <code>SnSAble</code> is a class that defines how to access all
              <b>Searchable</b> and <b>Sortable</b> properties of an Entity
            </li>
            <li>
              An <code>SnSAble</code> implements <code>ISnSAble</code> interface
            </li>
          </ul>
          <p class="mt-2">
            Imagine you have two Entities called <code>Employee</code> &
            <code>Department</code>
          </p>
          <div>
            <div>
              <pre>
    <code>
<span class="keyword">public class</span> <span class="class-name">Employee</span> 
{ 
  <span class="keyword">public int</span> Id {get;set;} 
  <span class="keyword">public string</span> Name {get;set;} = <span class="string">null!</span>; 
  <span class="keyword">public string</span> Address {get;set;} = <span class="string">null!</span>;
  <span class="keyword">public bool</span> IsActive {get;set;} 
  <span class="keyword">public int</span> Department {get;set;}
  <span class="keyword">public virtual</span> <span class="class-name">Department</span> DepartmentNavigation {get;set;} 
} 

<span class="keyword">public class</span> <span class="class-name">Department</span> 
{ 
  <span class="keyword">public int</span> Id {get;set;} 
  <span class="keyword">public string</span> Name {get;set;} = <span class="string">null!</span>; 
  <span class="keyword">public virtual</span> <span class="class-name">List&lt;Employee&gt;</span> Employees {get;set;} = <span class="keyword">new</span>();
} 
    </code>
          </pre>
            </div>
          </div>
          <p class="mt-2">
            Now, if you only want to allow the users to search or sort by, let's
            say the <code>Name</code>, <code>IsActive</code> properties & the
            <code>Department.Name</code> property of an <code>Employee</code>,
            your <code>SnSable</code> for the <code>Employee</code> will look
            something like the following;
          </p>
          <pre>
  <code>
<span class="comment">// Define the type as reusable to improve readability</span>
<span class="keyword">using</span> <span class="class-name">System</span>;
<span class="keyword">using</span> <span class="class-name">System.Linq.Expressions</span>;

<span class="keyword">public class</span> <span class="class-name">SnSEmployee</span> : <span class="class-name">ISnSAble</span> 
{
  <span class="keyword">public static readonly</span> Expression&lt;Func&lt;<span class="class-name">Employee</span>, object&gt;&gt; Name = e =&gt; e.Name;
  <span class="keyword">public static readonly</span> Expression&lt;Func&lt;<span class="class-name">Employee</span>, object&gt;&gt; IsActive = e =&gt; e.IsActive;
  <span class="keyword">public static readonly</span> Expression&lt;Func&lt;<span class="class-name">Employee</span>, object&gt;&gt; DepartmentName = e =&gt; e.DepartmentNavigation.Name;
}
  </code>
</pre>

          <li class="mt-2"><code>Includeable</code> configuration file</li>
          <ul>
            <li>
              An <code>Includeable</code> is a class that defines how to access
              all <b>Navigation</b> properties or <b>Related</b> items of an
              Entity
            </li>
            <li>
              An <code>Includeable</code> implements
              <code>IIncludeable</code> interface
            </li>
          </ul>
          <p class="mt-2">
            For the above <code>Employee</code> entity, the
            <code>Includeable</code> will look similar to the following
          </p>
          <pre>
          <code>
<span class="keyword">using</span> type = Expression&lt;Func&lt;<span class="class-name">Employee</span>, object&gt;&gt;;

<span class="keyword">public class</span> <span class="class-name">IncEmployee</span>: <span class="class-name">IIncludable</span> 
{
    <span class="keyword">public static readonly</span> type Department = e =&gt; e.DepartmentNavigation;
}
          </code>
          </pre>
        </ol>
        <p>
          That's it! You are good to go. All you have to do now is handle the
          pagination request
        </p>
        <p>
          Assuming you are handling the pagination request from a controller;
          your controller will look similar to the following;
        </p>
        <pre>
        <code>
<span class="keyword">using</span> <span class="namespace">Shorpy.DTOs</span>;
<span class="keyword">using</span> <span class="namespace">Shorpy.Paginate</span>;

<span class="keyword">[HttpPost]</span>
<span class="keyword">public virtual async</span> <span class="method">Task&lt;IActionResult&gt;</span> Paginate(<span class="class-name">PaginateModel</span> pm) 
{
    <span class="comment">// you must pass your DBContext to the paginate function</span>
    <span class="keyword">var</span> paginatedObj = <span class="keyword">await</span> <span class="class-name">Paginate&lt;Employee, SnSEmployee, IncEmployee&gt;</span>.PaginateWithTracking(_dbcontext, pm);
    <span class="keyword">return</span> Ok(paginatedObj);
}
        </code>
</pre>
        <p class="mt-2">Two important things to note here;</p>
        <ol>
          <li>
            <code>PaginateModel</code> is a DTO coming from the
            <code>Shorpy</code> package.
          </li>
          <li>
            You must pass your <code>DBContext</code> to <code>Shorpy</code>
          </li>
        </ol>
      </div>

      <div class="p-5 pt-0 fs-5">
        <h2 class="display-4">Example</h2>
        <p>
          Below is an example of a request to paginate and search for all
          <code>Employees</code> whose name includes "Tim" and include the
          <code>Department</code> navigation
        </p>
        <pre>
          <code>
  <span class="keyword">curl</span> -X <span class="string">POST</span> /api/employees/paginate 
      <span class="keyword">-H</span> <span class="string">"Content-Type: application/json"</span> 
      <span class="keyword">-d</span> '{ 
          <span class="keyword">"search"</span>: [ 
              { 
                  <span class="keyword">"field"</span>: <span class="string">"name"</span>, 
                  <span class="keyword">"value"</span>: <span class="string">"Tim"</span>, 
                  <span class="keyword">"method"</span>: <span class="string">"like"</span> 
              } 
          ], 
          <span class="keyword">"include"</span>: [<span class="string">'Department'</span>], 
          <span class="keyword">"limit"</span>: <span class="number">10</span>, 
          <span class="keyword">"offset"</span>: <span class="number">0</span> 
      }'
          </code>
      </pre>

        <p class="mt-3">The above request will give the following response</p>
        <pre>
          <code>
  {
    <span class="keyword">"values"</span>: [
      {
        <span class="keyword">"id"</span>: <span class="number">1</span>,
        <span class="keyword">"name"</span>: <span class="string">"Timothée Bing"</span>,
        <span class="keyword">"address"</span>: <span class="string">"xxx xxx xxxx"</span>,
        <span class="keyword">"isActive"</span>: <span class="number">1</span>,
        <span class="keyword">"departmentNavigation"</span>: {
          <span class="keyword">"id"</span>: <span class="number">2</span>,
          <span class="keyword">"name"</span>: <span class="string">"HR"</span>
        }
      }
    ],
    <span class="keyword">"total"</span>: <span class="number">1</span>
  }
          </code>
      </pre>
      </div>
    </div>

    <div class="text-center mb-5">
      <h1 class="display-1">Hope you enjoy using Shorpy</h1>
      <p class="lead">
        If you "Star" the GitHub Repository, you will get notified of new
        updates and patches.
      </p>
    </div>

    <!-- bootstrap JS -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
